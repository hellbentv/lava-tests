metadata:
    name: lava-boottime-threshold
    format: "Lava-Test-Shell Test Definition 1.0"
    description: "simple test for calculating the time to boot and run lava-test-shell using uptime, pass fail based on threshold"
params:
    threshold: 10
run:
    steps:
        - echo "Return uptime, though this does take in account the time to run lava-test-shell"
        - upsecs=$(cat /proc/uptime | cut -d ' ' -f1)
        - echo "upsecs = $upsecs seconds"
        - if [ "$upsecs" >= "$threshold" ]; then lava-test-case boottime-threshold --result pass --measurement $upsecs --units seconds ; fi
        - if [ "$upsecs" < "$threshold" ]; then lava-test-case boottime-threshold --result fail --measurement $upsecs --units seconds ; fi
        
